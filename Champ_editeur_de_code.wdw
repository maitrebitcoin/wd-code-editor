#To edit and compare internal_properties, use WINDEV integrated tools.
#Internal properties refer to the properties of controls in windows, reports, etc.
info :
 name : Champ_editeur_de_code
 major_version : 27
 minor_version : 0
 type : 8
 description : ""
 subtype : 0
window :
 name : Champ_editeur_de_code
 identifier : 0x23ba8a0d04238390
 internal_properties : BwAAAAcAAACkraLwMrP9NA8YwXPcCHZpVcV+vJswVLTydUm22/pKrQjKFoM+fFHiFeajcH0+Z4uRsdWCZkDEn8/HLrN68v1h9X1LKke1iFilQk6dDRyBkFGNhrAddGqMWV/4y1uKwr3xbjqTNeWS94kVBmUSPsiZ7+srlmAANtIjWpL4dRhParPfWQyk3jff9L/IjPkU19zx68l2nNbATAmX/b4Di9tBXNg+eoAoI+fqswOK9p6ROFrPBhYOimeA6+2rGoOcjBZ1AFE/SxSkzxoxmzkp/ZTWo38OvIT6WvVjTDhAIcmre9IxLZv9i3hx/CQRbCWLA2TiCTq5I1c+bK5PxHLIQ4/KVezusUCaW6RKP3hTOe7iFC5FMZsY8sThwDgBL3h9Mxsy2m1jCQTygbZDLySyQhzMV3t90mA0cUUqrsj+whhzNRGw778fsLw9DyJyh26NB0/X6emYCfW81ukmTONDhbuM6QmSpR2LpiZGy6RKmtbb90DTNCS2BBB+noItwIgzkdXcJ07Nb2oTL71LLtnc+0ZBeA9ot3/5PKXK1V3gDDq7szRZhZpCNRgdnO84Pg74hHq+nmZpBy+BpnmqFfZWOL/Vrh67gH3MIlJc/F4q4xlK8DcCDg44fkvmZvDSbv28JjCd+gLO6nL0SoR/EwOnaBw4ILuSqUPcT3PC/vkpu0n3I/9a/dA5+yrjL7V3mmLaWwSDXh0UG7vIHlGo+KsO3g2LaQQJPg==
 properties :
  width : 640
  height : 480
 controls :
  -
    name : Champ_editeur_de_code
    identifier : 0x23ba8a0d04248390
    internal_properties : BwAAAAcAAAB8ekANO9UU6tKrYZc4MsjOzAKeLsQfTTuxcHDTe+XcWFgC4svM+blgSloyn9Sr+pLRqq3ukv0HkiMh0q7l9ioeNJ/rPV+6+ytp6Q/yBiqKrYw8x7E6Z9pzwpNJx/BY77qH8e1wYWCCsYxDFbm8O0f2MBdehN618ziNS5kS0MUz0HxGHeO+Q0zielB/5j15RVI8kgWy0RuIn6zsiu9CXeQ6wPAuCGE1deamIU+7g0hv2mRP28PxQ8L0XEePrqY8ZI4FkmoB26Ivt3+5ZUGp1ehQtFa3WowQ2n+QLBgvUFq5T1PtSY5YI/PiOS4cw0+5JdFs4xl4oTGoRp/gEq8yOF8ZBY9Fffz1/TxrjxgBPcy00ioB9V9CxaQRPjbtAmFiZh2N6dNAff+61ItjRgJLN3NhOMygIxAmSMdKcERl81u+a0EceGe7oBXU
    properties :
     width : 640
     height : 480
    controls :
     -
       name : HTML_edit_code
       identifier : 0x23ba8a0d04258390
       internal_properties : BwAAAAcAAAAQVJpAlYSK4swY71XkY/jM2z3GJfTjcSDtPHv8lqnE/iKTQY51UAbZQxh2GBZ3GftQeWc+Dz0v/F9bBe4fHH0FooL9uoJgupMzsxuA2S7rAtd7CviVlN1BRq1a546alvZSKX6xk/k8xNXyphF2nlWAty0zFrC3aFixOH7ENCN90Qx4VjMeMvLWGkYPWBK0Nk0NlA14PkMDJI+kXIVCU9kJIJ71ppvIELX6No1xbLxggJcRRGJvxfup0GwJqbSdcc129UXO8eBXpbrPQkGXdIMkknFLO2XjMZgrDZeGdxg1dPr7NyczoDwE2j1lISONAKktdbWnahcEtNLbOq4mmVsjGjQwkWbj/UZHu79PJdHTIDypoKux19gGNK1ShIHtbMUd/P/FDIFnXVemWVHFgEPd5OJvfejiG3IVOgA8qSs4AGXqwgSQnHSIT4PTrLKfLsRGaKg8+ovPG8e9RLYnv8wbsKsbUZxd4w0oadqWaPxqqNdLX4BYSMFNc863Q1lek+RLIcIvtT90Je4t2Z/TjZ6lFj5YouJyWS09i6PC3xuLn5jlKd50IcKJ9nQLn8SCtywbElDkr75CnG/MuZhOCgofnSfUWyL/NFT9WWPxmmoeXVTs4OwHOsD2sO4OKTsK0Rs6oIdNy9o5fVnITm//RLWcaBAkikcZG9TMeA==
       properties :
        width : 640
        height : 480
       type : 23
       code_elements :
        type_code : 36
        p_codes :
         -
           code : |1+
            PROCÉDURE ClicLien(sUrl est chaine, bDansNouvelleFenetre est un booléen, sDestination est une chaine)
            
            RENVOYER Vrai
           type : 266
         -
           code : |1+
            PROCEDURE ChangePage( sUrl est chaine, sDestination est une chaine )
            
            RENVOYER Vrai
           type : 290
         -
           code : |1+
            PROCEDURE ChargementRessources( sUrl est chaine, nType est entier )
            // nType donne le type de ressource à télécharger
            // exemple : typehtmlResImage, typehtmlResScript, typehtmlResCss, typehtmlResXMLHttpRequest, typehtmlAutre
            // ATTENTION : ce traitement est appelé depuis un thread secondaire
            
            RENVOYER Vrai
           type : 289
         -
           code : |1+
            PROCEDURE ClicDroitLien( sUrl est chaine )
           type : 291
    type : 32
    code_elements :
     type_code : 70
     p_codes :
      -
        code : |1+
         PROCEDURE MaFenêtre()
         
         global
         	code_saisi est une chaîne UNICODE
         	
         	Traitement_Modification est une procédure
         	
         ParametreEditeur est une structure
         	avec_numéro_de_ligne est un booléen 
         	nom_langage est une chaîne // ex : "js" 
         	definition_token est chaine // expressions qui définissent le langage si on en veut un personnalisé
         	style_css_token est chaine // css pour les couleurs des token. mettre "" pour <par défaut>
         fin
      -
        code : |1+
         code_saisi = MoiMême..Valeur
         code_js est chaine = [
         	flask.updateCode('%1')<§cs:4§>
         ]
         param_js est chaine UNICODE = code_saisi
         param_js  = remplace(param_js,"""","\""")
         param_js  = remplace(param_js,rc,"\n")
         code_js = Remplace(code_js,"%1",param_js)
         
         ExécuteJS(HTML_edit_code,code_js)
         
        type : 43
      -
        code : |1+
         MoiMême..Valeur = code_saisi
         
        type : 42
 menu :
  name : _Menu
  identifier : 0x23b27b2e02e88cc1
  internal_properties : BwAAAAcAAAAmnmsMK+pSZJrizHlry5BJP+sbufa4zccF/7flbZf4xlv2rTJ5avaWvToZog8Bfg5qj5cqL9/K+JLwUxYFygPOe4+hQvOqbwHe/B4YH64plXyGcwsEwRu1H7jq/rNyP/R81O/USeI2/APkVZidyxtNh0Y/fytnunm/iyk7nElGG0atcn+8qJ8LBDnxES4mH02yeiwFrgWEo6ixqShEqe7e3BCIlx4J1qYpblIc431oi7HFGkFiVZlDyYxU+PQl0CTH8W8dFRumzgcOnys3VyceJZTYWUhKrQ==
  options : []
 languages :
  - fr-FR
 popup_menus : []
 message_bar : {}
 code_elements :
  type_code : 71
  p_codes : []
  procedures :
   -
     name : onModifCode
     procedure_id : 1421600420833690512
     type_code : 14
     code : |1+
      // appelé depuis le JS a chaque modification du code
      procédure onModifCode(code_js est chaine ansi )
      
      code_saisi =UTF8VersUnicode(code_js)
      
      // appel de la callbakc utilisaeur si définie
      si Traitement_Modification<>null ALORS
      	Traitement_Modification( code_saisi )
      FIN
      
     type : 458752
   -
     name : init_editeur
     procedure_id : 1421600420833756048
     type_code : 14
     code : |1-
      procédure init_editeur( parametre_editeur est ParametreEditeur  )
      
      // Init du champ HTML avec un champ <P> géré par le JS de codeflask
      // voir https://github.com/kazzkiq/CodeFlask
      code_html est chaîne = [
      <html>
      <head></head>
      <style>
      STYLE_SI_CSS_PERSO
      </style>
      <body>
         <p id="editor" name="editor"/>
      </body>
      <script language="Javascript" type="text/javascript" src="https://unpkg.com/codeflask/build/codeflask.min.js"></script>
      <script language="Javascript" type="text/javascript">
      
      const editorElem = document.getElementById('editor');
      // creation editeur
      const flask = new CodeFlask(editorElem, { language: 'PARAM_LANGUAGE',
      										  defaultTheme: true,
      										  lineNumbers: false
      										});
      // CODE_SI_LANGUAGE_PERSO
      									
      // init a chaine vide										
      flask.updateCode('')
      // pour que la procédure onModifCode soit appelée a chaque modif du code
      flask.onUpdate((code) => {
      	WL.Execute("onModifCode", code)
      });
      
      </script>
      </html>
      ]
      
      // code JS si on veut personnaliser le langage de l'éditeur de code
      // voir https://prismjs.com/tokens.html
      lang_perso est chaîne = parametre_editeur.nom_langage
      code_js_desc_language est chaine = [
      	Prism.languages['[%lang_perso%]'] = {
      		CODE_DEFINITION_TOKEN
      	};
       	flask.addLanguage('[%lang_perso%]', Prism.languages['[%lang_perso%]']);
      ]
      
      
      procédure interne _PatchHtml( a_rerchercher, valeur_finale )
      	code_html = Remplace( code_html,a_rerchercher,valeur_finale )
      FIN
      
      // init chaine
      _PatchHtml( "PARAM_LANGUAGE", parametre_editeur.nom_langage )
      
      si parametre_editeur.avec_numéro_de_ligne alors
      	_PatchHtml(  "lineNumbers: false", "lineNumbers: true" )
      fin
      // si on veut un langage personnalisée
      si parametre_editeur.definition_token<>"" ALORS
      	s est chaine = Remplace( code_js_desc_language ,"CODE_DEFINITION_TOKEN", parametre_editeur.definition_token )
      	_PatchHtml("// CODE_SI_LANGUAGE_PERSO", s + rc)
      FIN
      // si on veut une coloration personnalisée
      SI parametre_editeur.style_css_token<>"" ALORS
      	_PatchHtml("STYLE_SI_CSS_PERSO", parametre_editeur.style_css_token)
      	_PatchHtml("defaultTheme: true", "defaultTheme: false")
      sinon
      	_PatchHtml("STYLE_SI_CSS_PERSO","")
      FIN
      
      
      // init champ HTML
      HTML_edit_code = code_html
     type : 458752
  procedure_templates : []
  property_templates : []
 code_parameters :
  internal_properties : BwAAAAcAAAA6ih3UbgNXHwTtiPSFUEj+2fi/m7v4QV2rqidAupM=
  original_name : FenêtreInterne1
resources :
 string_res :
  identifier : 0x13b27b2e001f8cc1
  internal_properties : BwAAAAcAAAAnMYFQ1bL/vz9ehh7L22SNNSlIzGTOI8h5F/WtgDNP
custom_note :
 internal_properties : BwAAAAcAAAC68/W0/adbG0nFCRhrE42B5HRnbDzVHaz86sSQyxlBk7I=
rad :
 internal_properties : BwAAAAcAAABoAN7PLpwJW3EiA7WVZdCA5EwrCA1rvutcDHooMWKe
